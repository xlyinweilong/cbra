var UserLogin={checkLoginForm:function(){$("#login_msg").empty();var email=$.trim($("#login_email").val());var passwd=$.trim($("#login_passwd").val());var emailRegex=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,8}$/i;if(email==""){$("#login_email").focus();$("#login_msg").html("请输入邮件地址");return false}if(!emailRegex.test(email)){$("#login_email").focus();$("#login_msg").html("请输入合法的邮件地址");return false}if(passwd==""){$("#login_passwd").focus();$("#login_msg").html("请输入密码");return false}$("#login_loading_div").show();$("#login_submit_btn").attr("disabled",true);return true},checkPopLoginForm:function(){$("#pop_login_msg").empty();var email=$.trim($("#pop_login_email").val());var passwd=$.trim($("#pop_login_passwd").val());var emailRegex=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,8}$/i;if(email==""){$("#pop_login_email").focus();$("#pop_login_msg").html("请输入邮件地址");return false}if(!emailRegex.test(email)){$("#pop_login_email").focus();$("#pop_login_msg").html("请输入合法的邮件地址");return false}if(passwd==""){$("#pop_login_passwd").focus();$("#pop_login_msg").html("请输入密码");return false}$("#pop_login_loading_div").show();$("#pop_login_submit_btn").attr("disabled",true);return true}};var UserSignup={checkSignupForm:function(){var signUpWMsgDiv=$("#signup_wrong_msg_div");signUpWMsgDiv.empty();var name=$.trim($("#signup_name").val());var email=$.trim($("#signup_email").val());var passwd=$.trim($("#signup_passwd").val());var passwd2=$.trim($("#signup_passwd2").val());var emailRegex=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,8}$/i;if(name==""){$("#signup_name").focus();signUpWMsgDiv.html("请输入姓名");return false}if(email==""){$("#signup_email").focus();signUpWMsgDiv.html("请输入邮件地址");return false}if(!emailRegex.test(email)){$("#signup_email").focus();signUpWMsgDiv.html("请输入合法的邮件地址");return false}if(passwd==""){$("#signup_passwd").focus();signUpWMsgDiv.html("请输入密码");return false}if(passwd.length<6){$("#signup_passwd").focus();signUpWMsgDiv.html("密码长度至少6位，请选择新密码");return false}if(passwd2==""){$("#signup_passwd2").focus();signUpWMsgDiv.html("请输入重复密码");return false}if(passwd!=passwd2){$("#signup_passwd2").focus();signUpWMsgDiv.html("两次密码不一致");return false}$("#signup_loading_div").show();$("#signup_submit_btn").attr("disabled",true);return true},checkPopSignupForm:function(){$("#pop_signup_msg").empty();var name=$.trim($("#pop_signup_name").val());var email=$.trim($("#pop_signup_email").val());var passwd=$.trim($("#pop_signup_passwd").val());var passwd2=$.trim($("#pop_signup_passwd2").val());var emailRegex=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,8}$/i;if(name==""){$("#pop_signup_name").focus();$("#pop_signup_msg").html("请输入姓名");return false}if(email==""){$("#pop_signup_email").focus();$("#pop_signup_msg").html("请输入邮件地址");return false}if(!emailRegex.test(email)){$("#pop_signup_email").focus();$("#pop_signup_msg").html("请输入合法的邮件地址");return false}if(passwd==""){$("#pop_signup_passwd").focus();$("#pop_signup_msg").html("请输入密码");return false}if(passwd.length<6){$("#pop_signup_passwd").focus();$("#pop_signup_msg").html("密码长度至少6位，请选择新密码");return false}if(passwd2==""){$("#pop_signup_passwd2").focus();$("#pop_signup_msg").html("请输入重复密码");return false}if(passwd!=passwd2){$("#pop_signup_passwd2").focus();$("#pop_signup_msg").html("两次密码不一致");return false}$("#pop_signup_loading_div").show();$("#pop_signup_submit_btn").attr("disabled",true);return true}};var UserVerify={sendVerifyEmail:function(){$("#send_verify_email_msg").css("text-align","center");$("#send_verify_email_msg").html('发送中<img src="/images/032.gif"/>');$.getJSON("/account/send_verify_email",function(json){if(json.success){$("#send_verify_email_msg").hide();$("#send_verify_email_success").show()}else{$("#send_verify_email_msg").html(json.singleErrorMsg)}})}};var Collect={showNoticeMessage:function(clazz,message){$(".noticeMessage").css("display","");if(clazz=="loadingMessage"){$("."+clazz).css("display","")}else{$("."+clazz).css("display","").html(message)}},hiddenNoticeMessage:function(){$(".noticeMessage").css("display","none");$(".successMessage").css("display","none");$(".wrongMessage").css("display","none");$(".loadingMessage").css("display","none")},validateCollectEdit:function(){this.hiddenNoticeMessage();var amount=$.trim($("#collect_amount").val());var reason=$.trim($("#collect_reason").val());$("#collect_edit_notice").css("display","none");$("#collect_reason_notice").html("");$("#collect_amount_notice").html("");var re=/^\d+(\.\d{0,2})?$/;if(amount==""||amount==0){$("#collect_amount_notice").html("必填");this.showNoticeMessage("wrongMessage","必填项目不能为空");return}var re1=/^\d+(\.\d+)?$/;var notice="金额必须为数字";if(re1.test(amount)&&!re.test(amount)){notice="小数点后最多保留两位"}if(!re.test(amount)){$("#collect_amount").val("");this.showNoticeMessage("wrongMessage",notice);$("#collect_amount").focus();return}if(reason==""){$("#collect_reason_notice").html("必填");this.showNoticeMessage("wrongMessage","必填项目不能为空");return}this.showNoticeMessage("loadingMessage");$("#collect_edit").submit()},validateCollectSend:function(){this.hiddenNoticeMessage();var emails=$.trim($("#send_email").val());if(emails==""||emails=="输入邮件地址，以逗号或换行分隔..."){this.showNoticeMessage("wrongMessage","请输入邮件地址");$("#send_email").val("");$("#send_email").focus();return}this.showNoticeMessage("loadingMessage");$("#collect_send").submit()},sendMoreOnfocus:function(){if($.trim($("#sendmore_email").val())=="输入邮件地址，以逗号或换行分隔..."){$("#sendmore_email").val("");$("#sendmore_email").css("color","")}},validateCollectSendMore:function(){this.hiddenNoticeMessage();var emails=$.trim($("#sendmore_email").val());if(emails==""||emails=="输入邮件地址，以逗号或换行分隔..."){this.showNoticeMessage("wrongMessage","请输入邮件地址");$("#sendmore_email").val("");$("#sendmore_email").focus();return}this.showNoticeMessage("loadingMessage");$("#collect_sendmore").submit()},sendEmailFocus:function(){if($.trim($("#send_email").val())=="输入邮件地址，以逗号或换行分隔..."){$("#send_email").val("");$("#send_email").css("color","");$("#send_email").attr("class","send_link_textarea2");$("#send_email_button").css("display","")}},sendEmailCancle:function(){$("#send_email").val("输入邮件地址，以逗号或换行分隔...");$("#send_email").css("#999999");$("#send_email_button").css("display","none");$("#send_email_notice").css("display","none");$("#send_email").attr("class","send_link_textarea");$("#send_email").val()},downloadPaymantList:function(paidCount,webId){if(paidCount==null||paidCount<1){$("#collect_payment_download").html("列表为空");$("#collect_payment_download").css("display","");return}location.href="/collect/download/"+webId},collectBox:function(){$("#collection_detail_top_div").toggle();$("#collection_detail_table").toggle();if($("#collection_detail_table").css("display")=="none"){$("#box_href").html("查看详情")}else{$("#box_href").html("隐藏详情")}}};var FeedbackSuccess={_init:false,open:function(){if(!FeedbackSuccess._init){$("#sendFeedbackSuccess").dialog({autoOpen:false,width:540,modal:true,bgiframe:true,title:"给友付提建议"});FeedbackSuccess._init=true}$("#sendFeedbackSuccess").dialog("open")},close:function(){$("#sendFeedbackSuccess").dialog("close")}};var Feedback={_init:false,open:function(){this.hiddenMessage();if(!Feedback._init){$("#sendFeedback").dialog({autoOpen:false,width:540,modal:true,bgiframe:true,title:"给友付提建议"});Feedback._init=true}$("#sendFeedback").dialog("open")},close:function(){$("#sendFeedback").dialog("close")},hiddenMessage:function(){$("#notice").css("display","none");$("#wrong").css("display","none");$("#success").css("display","none");$("#loading").css("display","none")},showNoticeMessage:function(clazz,message){$("#notice").css("display","");if(clazz=="loading"){$("#"+clazz).css("display","")}else{if(message==""){$("#"+clazz).css("display","")}else{$("#"+clazz).css("display","").html(message)}}},sendFeedback:function(){Feedback.hiddenMessage();var subject=$.trim($("#subject").val());var message=$.trim($("#message").val());if(subject==""){Feedback.showNoticeMessage("wrong","请输入意见或建议");$("#subject").focus();return}if(message==""){this.showNoticeMessage("wrong","请输入意见或建议");$("#message").focus();return}$("#sendFeedback").load("/account/z_feedback_dialog",$("#feedback").serialize(),function(response){var ajaxReturn=eval($(response).find('div[title="ajaxReturn"]').text());if(ajaxReturn){Feedback.close();FeedbackSuccess.open()}else{}})}};var sendCollectNotice={_init:false,open:function(){if($.trim($("#no_pay_count").html())==0){alert("无未付款用户");return}$("#send_notify_again_notice").html("向未付款人发付款提醒?");$("#send_close").css("display","none");$("#sendNoticeAgainForm").css("display","none"),$("#sendNoticeAgainForm").css("display","");$("#send_close").css("display","none");if(!sendCollectNotice._init){$("#sendNoticeAgain").dialog({autoOpen:false,width:400,modal:true,title:""});sendCollectNotice._init=true}$("#sendNoticeAgain").dialog("open")},close:function(){$("#sendNoticeAgain").dialog("close")},sendNoticeAgain:function(){$("#send_notify_again_notice").html("正在发送...");$("#sendNoticeAgain").load("/collect/z_send_notice_again",$("#sendNoticeAgainForm").serialize(),function(response){var ajaxReturn=eval($(response).find('div[title="ajaxReturn"]').text());if(ajaxReturn){$("#send_notify_again_notice").html("发送成功");$("#sendNoticeAgainForm").css("display","none");$("#send_close").css("display","")}else{}})}};var Withdraw={showWithdrawTypeByCreditCardType:function(){this.show();$("#withdraw_account_type").bind("change",this.show)},show:function(){$("#bank_div").css("display","none");$("#alipay_div").css("display","none");$("#credit_card_div").css("display","none");$("#paypal_div").css("display","none");if($("#withdraw_account_type").val()=="CREDITCARD"){$("#credit_card_div").css("display","")}else{if($("#withdraw_account_type").val()=="ALIPAY"){$("#alipay_div").css("display","")}else{if($("#withdraw_account_type").val()=="PAYPAL"){$("#paypal_div").css("display","")}else{$("#bank_div").css("display","")}}}},validateWithdrawCreate:function(){$("input[class='collect_input']").parent().next("em").html("");Collect.hiddenNoticeMessage();var amount=$.trim($("#amount").val());var re=/^\d+(\.\d{0,2})?$/;if(amount==""||amount==0){$("#amount_notice").html("必填");Collect.showNoticeMessage("wrongMessage","必填项目不能为空");return}var re1=/^\d+(\.\d+)?$/;var notice="金额必须为数字";if(re1.test(amount)&&!re.test(amount)){notice="小数点最多保留两位"}if(!re.test(amount)){$("#amount").val("");Collect.showNoticeMessage("wrongMessage",notice);$("#amount").focus();return}Collect.showNoticeMessage("loadingMessage");$("#withdraw_edit").submit()},validateWithdrawAccountCreate:function(){$("input[class='collect_input3']").next("em").html("");Collect.hiddenNoticeMessage();var name=$.trim($("input[name='name']").val());if(name==""||name=="给这个账户加个标签..."){$("input[name='name']").next("em").html("必填");$("input[name='name']").focus();this.showSingleErrorMsg();return}if($("#withdraw_account_type").val()=="CREDITCARD"){if(!this.validateIsEmpty("credit_card_holder_name")){return}if(!this.validateIsEmpty("credit_card_number")){return}}else{if($("#withdraw_account_type").val()=="ALIPAY"){if(!this.validateIsEmpty("email")){return}}else{if($("#withdraw_account_type").val()=="PAYPAL"){if(!this.validateIsEmpty("paypal")){return}}else{if(!this.validateIsEmpty("bank_user_name")){return}if(!this.validateIsEmpty("bank_name")){return}if(!this.validateIsEmpty("bank_branch")){return}if(!this.validateIsEmpty("bank_account_number")){return}}}}Collect.showNoticeMessage("loadingMessage");$("#withdraw_account_create").submit()},validateIsEmpty:function(name){var text=$.trim($("input[name='"+name+"']").val());if(text==""){$("input[name='"+name+"']").next("em").html("必填");$("input[name='"+name+"']").focus();this.showSingleErrorMsg();return false}else{return true}},showSingleErrorMsg:function(){Collect.showNoticeMessage("wrongMessage","必填项目不能为空")},deleteWithdrawAccount:function(accountId){if(confirm("确定要删除？")){location.href="/withdraw/list/"+accountId+"/delete"}else{return}}};var UserUpdate={validateRegInfo:function(){Collect.hiddenNoticeMessage();$("#reginfo_name_notice").css("display","none");$("#reginfo_email_notice").css("display","none");if($.trim($("#reginfo_name").val())==""){$("#reginfo_name").val("");$("#reginfo_name").focus();$("#reginfo_name_notice").css("display","");$("#reginfo_name_notice").html("必填");Collect.showNoticeMessage("wrongMessage","必填项目不能为空");return}Collect.showNoticeMessage("loadingMessage");$("#reginfo").submit()},validateModifyPassword:function(){Collect.hiddenNoticeMessage();$("#modify_password_notice").css("display","none");$("#modify_password1_notice").css("display","none");$("#modify_password2_notice").css("display","none");if($.trim($("#password").val())==""){$("#password").val("");$("#password").focus();$("#modify_password_notice").css("display","");$("#modify_password_notice").html("必填");Collect.showNoticeMessage("wrongMessage","必填项目不能为空");return}if($.trim($("#password1").val())==""){$("#password1").val("");$("#password1").focus();$("#modify_password1_notice").css("display","");$("#modify_password1_notice").html("必填");Collect.showNoticeMessage("wrongMessage","必填项目不能为空");return}if($.trim($("#password2").val())==""){$("#password2").val("");$("#password2").focus();$("#modify_password2_notice").css("display","");$("#modify_password2_notice").html("必填");Collect.showNoticeMessage("wrongMessage","必填项目不能为空");return}var password1=$.trim($("#password1").val());var password2=$.trim($("#password2").val());if(password1!=password2){$("#password1").val("");$("#password2").val("");$("#password1").focus();Collect.showNoticeMessage("wrongMessage","两次输入密码不一致");return}Collect.showNoticeMessage("loadingMessage","");$("#account_modify_password").submit()},validateSendResetPasswd:function(){Collect.hiddenNoticeMessage();var email=$.trim($("#email").val());var verifycode=$.trim($("#verifycode").val());if(email==""){Collect.showNoticeMessage("wrongMessage","请输入您的注册邮箱");$("#email").focus();return}if(verifycode==""){Collect.showNoticeMessage("wrongMessage","请输入验证码");$("#verifycode").focus();return}Collect.showNoticeMessage("loadingMessage");$("#send_reset_passwd").submit()},validateResetPasswd:function(){Collect.hiddenNoticeMessage();var password=$.trim($("#password").val());var password1=$.trim($("#password1").val());if(password==""){Collect.showNoticeMessage("wrongMessage","请输入您的密码");$("#password").focus();return}if(password.length<6){Collect.showNoticeMessage("wrongMessage","密码长度不能小于6位");$("#password").focus();return}if(password1==""){Collect.showNoticeMessage("wrongMessage","请重复您的密码");$("#password1").focus();return}if(password1!=password){Collect.showNoticeMessage("wrongMessage","两次输入密码不一致");$("#password").val("");$("#password1").val("");$("#password").focus();return}Collect.showNoticeMessage("loadingMessage");$("#reset_passwd").submit()}};var CreditCard={initExpdateDate:function(){var expdateMonth=$("#expdate_month")[0];for(var i=1;i<13;i++){var option=document.createElement("option");var text=i;if(i<10){text="0"+i}option.text=text;option.value=text;expdateMonth.add(option,null)}var expdateYear=$("#expdate_year")[0];var now=new Date();var year=now.getFullYear();for(i=0;i<30;i++){option=document.createElement("option");option.text=year+i;option.value=year+i;expdateYear.add(option,null)}}};var GatewayPayment={initGatewaySelect:function(){$("body").click(function(event){var uls=$(".selects ul");uls.slideUp("fast")});$(".selects").click(function(event){$("#payment_msg_div").hide();var ul=$(this).children("ul")[0];if($(ul).css("display")!="none"){$(ul).slideUp("fast")}else{$(ul).slideDown("fast")}event.stopPropagation()});$(".selects li").mouseover(function(event){$(".selects li").removeClass("selected");var target=$(event.target);target.addClass("selected")});$(".selects li").click(function(event){event.stopPropagation();var target=$(event.target);var ul=target.parent("ul").first();if($(ul).css("display")!="none"){$(ul).slideUp("fast")}else{$(ul).slideDown("fast")}var span=ul.prev("span").first();var inputId=span.attr("input");var input=$("#"+inputId);var optionValue=target.attr("tvalue");var optionHTML=target.html();span.html(optionHTML);input.val(optionValue);if(ul.attr("id")=="payment_type"){if(optionValue=="PAYPAL_CREDITCARD"){$("#credit_card_input_div").slideDown("fast");if(optionHTML.indexOf("VISA")!=-1){$("#card_type").val("VISA")}else{if(optionHTML.indexOf("MASTER")!=-1){$("#card_type").val("MASTER CARD")}}}else{$("#credit_card_input_div").slideUp("fast")}if(optionValue=="CHINABANK"){$("#chinabank_select_div").show()}else{$("#chinabank_select_div").hide();$("#pmode_id").val("-1")}if(optionValue=="ALIPAY"||optionValue=="PAYPAL"){var defaultText="";if(optionValue=="ALIPAY"){defaultText="请输入支付宝登录账号"}else{defaultText="请输入Paypal登录账号"}var buyerEmailField=$("#buyer_email");buyerEmailField.focus(function(){Effects.toggleFocus("buyer_email","focus",defaultText,"","black")});buyerEmailField.blur(function(){Effects.toggleFocus("buyer_email","blurs",defaultText,"","#909ea4")});$("#buyer_email").val(defaultText);$("#buyer_email_input_div").show()}else{$("#buyer_email_input_div").hide()}}})},checkGatewayForm:function(qMsg){var gatewayType=$("#gateway_type").val();if(gatewayType=="-1"){qMsg.text("请选择支付方式");return false}else{if(gatewayType=="PAYPAL_CREDITCARD"){var cardAcct=$.trim($("#acct").val());var cardCvv2=$.trim($("#cvv2").val());var expdateYear=$.trim($("#expdate_year").val());var expdateMonth=$.trim($("#expdate_month").val());if(cardAcct==""){$("#acct").focus();qMsg.text("请输入卡号");return false}if(cardCvv2==""){$("#cvv2").focus();qMsg.text("请输入验证码");return false}if(expdateYear=="-1"){$("#expdate_year").focus();qMsg.text("请输入有效期");return false}if(expdateMonth=="-1"){$("#expdate_month").focus();qMsg.text("请输入有效期");return false}}else{if(gatewayType=="CHINABANK"){var pmodeId=$("#pmode_id").val();if(pmodeId=="-1"){$("#pmode_id").focus();qMsg.text("请选择银行");return false}}else{if(gatewayType=="ALIPAY"||gatewayType=="PAYPAL"){var buyerEmail=$.trim($("#buyer_email").val());if(buyerEmail=="请输入支付宝登录账号"||buyerEmail=="请输入Paypal登录账号"){$("#buyer_email").val("")}}}}}return true}};var FundPayment={checkPaymentForm:function(){var paymentWMsgDiv=$("#payment_wrong_msg_div");var paymentLoadDiv=$("#payment_loading_div");var payerMsgTextArea=$("#payer_msg");var payerMsg=$.trim(payerMsgTextArea.val());if(payerMsg=="给收款人留言..."){payerMsgTextArea.empty()}var gatewayCheckFlag=GatewayPayment.checkGatewayForm(paymentWMsgDiv);if(!gatewayCheckFlag){return false}paymentWMsgDiv.empty();paymentLoadDiv.show();return true}};var TransferPayment={setTransferType:function(both){var tranferTypeHidden=$("#transfer_type");if(both){var balanceCheckbox=$("#transfer_type_balance_checkbox");var gatewayCheckbox=$("#transfer_type_gateway_checkbox");if(balanceCheckbox[0].checked&&gatewayCheckbox[0].checked){tranferTypeHidden.val("BALANCE_AND_PAYGATE")}else{if(balanceCheckbox[0].checked){tranferTypeHidden.val("BALANCE_AND_PAYGATE")}else{if(gatewayCheckbox[0].checked&&!balanceCheckbox[0].checked){tranferTypeHidden.val("PAYGATE")}}}}else{var balanceRadio=$("#transfer_type_balance_radio");var gatewayRadio=$("#transfer_type_gateway_radio");if(balanceRadio[0].checked){tranferTypeHidden.val("BALANCE")}else{if(gatewayRadio[0].checked){tranferTypeHidden.val("PAYGATE")}}}},checkPaymentForm:function(){var paymentMsgDiv=$("#payment_wrong_msg_div");var paymentLoadDiv=$("#payment_loading_div");var transferType=$("#transfer_type").val();if(transferType=="-1"){paymentMsgDiv.text("请选择转款方式....");paymentMsgDiv.show();return false}if(transferType=="BALANCE_AND_PAYGATE"){if($("#transfer_type_balance_checkbox")[0].checked&&!$("#transfer_type_gateway_checkbox")[0].checked){paymentMsgDiv.text("请选择支付网关....");paymentMsgDiv.show();return false}}if(transferType=="PAYGATE"||transferType=="BALANCE_AND_PAYGATE"){var gatewayCheckFlag=GatewayPayment.checkGatewayForm(paymentMsgDiv);if(!gatewayCheckFlag){return false}paymentMsgDiv.empty();paymentLoadDiv.show();return true}return true}};var FundTransfer={checkTransferForm:function(){var result=true;var amount=$.trim($("#transfer_amount").val());var title=$.trim($("#transfer_title").val());var transferName=$.trim($("#transfer_name").val());var transferEmail=$.trim($("#transfer_email").val());var numberRegex=/^\d+(\.\d{0,2})?$/;if(!numberRegex.test(amount)){$("#transfer_amount").focus();$("#transfer_amount_notice").html("请输入合法的金额");result=false}var emailRegex=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,8}$/i;if(!emailRegex.test(transferEmail)){$("#transfer_email").focus();$("#transfer_email_notice").html("请输入合法的邮件地址");result=false}if(transferEmail==""){$("#transfer_email").focus();$("#transfer_email_notice").html("必填");result=false}if(transferName==""){$("#transfer_name").focus();$("#transfer_name_notice").html("必填");result=false}if(amount==""){$("#transfer_amount").focus();$("#transfer_amount_notice").html("必填");result=false}if(title==""){$("#transfer_title").focus();$("#transfer_title_notice").html("必填");result=false}return result}};var Effects={toggleDisplay:function(eIds,clickId,showHTML,hideHTML){var show=true;for(var i=0;i<eIds.length;i++){var e=$("#"+eIds[i]);if(e.css("display")!="none"){show=false;e.hide()}else{e.show()}}if(show){$("#"+clickId).html(showHTML)}else{$("#"+clickId).html(hideHTML)}},toggleFocus:function(eId,type,initShowMsg,initHideMsg,styleColor){var e=$("#"+eId);var eVal=$.trim(e.val());if(type=="focus"){if(eVal==initShowMsg){e.val(initHideMsg)}}else{if(eVal==initHideMsg){e.val(initShowMsg)}}e.css("color",styleColor)}};var loginDialog={_init:false,open:function(defaultEmail,payid){if(!loginDialog._init){$("#loginDialog").dialog({autoOpen:false,width:500,show:"fade",hide:"fade",modal:true,title:"请登录"});loginDialog._init=true}if(defaultEmail!=null){this.setDefaultEmail(defaultEmail);signupDialog.setDefaultEmail(defaultEmail,payid)}$("#loginDialog").dialog("open")},close:function(){$("#loginDialog").dialog("close")},setDefaultEmail:function(email){var popLoginEmail=$("#pop_login_email");popLoginEmail.val(email);popLoginEmail.attr("readonly","readonly");popLoginEmail.css("color","#9D9D9D")},doLogin:function(){if(UserLogin.checkPopLoginForm()){$("#loginDialog").load("/account/z_login_dialog",$("#loginForm").serialize(),function(response){var ajaxReturn=eval($(response).find('div[title="ajaxReturn"]').text());if(ajaxReturn){var pathname=$(location).attr("pathname");if(pathname=="/public/index"||pathname=="/"){redirect("/account/overview")}else{redirectSelf()}}})}}};var signupDialog={_init:false,open:function(){if(!signupDialog._init){$("#signupDialog").dialog({autoOpen:false,width:500,show:"fade",hide:"fade",modal:true,title:"请注册"});signupDialog._init=true}$("#signupDialog").dialog("open")},close:function(){$("#signupDialog").dialog("close")},setDefaultEmail:function(email,payid){var popSignUpEmail=$("#pop_signup_email");popSignUpEmail.val(email);popSignUpEmail.attr("readonly","readonly");popSignUpEmail.css("color","#9D9D9D");$("#pop_signup_payid").val(payid)},doSignup:function(){if(UserSignup.checkPopSignupForm()){$("#signupDialog").load("/account/z_signup_dialog",$("#signupForm").serialize(),function(response){var ajaxReturn=eval($(response).find('div[title="ajaxReturn"]').text());if(ajaxReturn){var pathname=$(location).attr("pathname");if(pathname=="/public/index"){redirect("/account/overview")}else{redirectSelf()}}})}}};var verifyDialog={_init:false,open:function(){if(!verifyDialog._init){$("#verifyDialog").dialog({autoOpen:false,width:600,show:"fade",hide:"fade",modal:true,title:"请验证您的注册邮箱地址"});verifyDialog._init=true}$("#send_verify_email_msg").show();$("#send_verify_email_success").hide();$("#verifyDialog").dialog("open")},close:function(){$("#verifyDialog").dialog("close")},doVerify:function(){UserVerify.sendVerifyEmail()}};function redirect(url){$(location).attr("href",url)}function redirectSelf(){var url=$(location).attr("href");redirect(url)};